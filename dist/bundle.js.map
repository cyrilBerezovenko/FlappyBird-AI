{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/js/Bird.js","webpack:///./src/js/Generation.js","webpack:///./src/js/generation_runner.js"],"names":["Bird","init_ypos","vert_min","vert_max","hor_min","hor_max","_cVert","Math","random","_cHor","isAlive","yPos","speed","score","vert","undefined","hor","scale_vert","x","scale_hor","sigmoid","exp","chooseToJump","cVert","cHor","value","Generation","instanceCount","bg","fg","acceleration","height","width","birds","i","push","cMutate","sort","b1","b2","slice","bird","tmp","crossover","r1","randomInt","r2","forEach","el","mutate","b","min","max","rand","b3","Object","assign","create","getPrototypeOf","cvs","document","querySelector","ctx","getContext","Image","birdImage","pipeUp","pipeBottom","src","gap","jumpFrames","jumpFrameSize","border","gameSpeed","birdXPosition","decision_threshold","pipes","nextPipeInd","genCounter","generationBestScore","bestScore","genr","generationInfo","scoreInfo","bestScoreInfo","init","start","Pipe","restart","next","update","drawImage","filter","length","y","gone","passed","flap","innerText","requestAnimationFrame","onload","frame","floor"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/js/generation_runner.js\");\n","export default class Bird {\r\n\r\n    constructor(init_ypos, vert_min, vert_max, hor_min, hor_max) {\r\n        this._cVert = Math.random();\r\n        this._cHor = Math.random();\r\n        this.isAlive = true;\r\n        this.yPos = init_ypos;\r\n        this.speed = 0;\r\n        this.score = 0;\r\n        this.vert = undefined;\r\n        this.hor = undefined;\r\n\r\n        this.scale_vert = x => x / (vert_max - vert_min);\r\n        this.scale_hor = x => x / (hor_max - hor_min);\r\n\r\n        let sigmoid = x => 1 / (1 + Math.exp(-x));\r\n        this.chooseToJump = function() {\r\n            return sigmoid(this.cVert*this.scale_vert(this.vert)\r\n                + this.cHor*this.scale_hor(this.hor));\r\n        };\r\n    }\r\n\r\n    set _cVert(value) {\r\n        if(value > 1)\r\n            this.cVert = 1;\r\n        else if(value < 0)\r\n            this.cVert = 0;\r\n        else\r\n            this.cVert = value;\r\n    }\r\n\r\n    set _cHor(value) {\r\n        if(value > 1)\r\n            this.cHor = 1;\r\n        else if(value < 0)\r\n            this.cHor = 0;\r\n        else\r\n            this.cHor = value;\r\n    }\r\n}","import Bird from './Bird';\r\nimport {randomInt} from './generation_runner';\r\n\r\nexport default class Generation {\r\n\r\n    constructor(instanceCount, bg, fg, acceleration, init_ypos) {\r\n        let vert_min = 0;\r\n        let vert_max = bg.height - fg.height;\r\n        let hor_min = 0;\r\n        let hor_max = bg.width;\r\n        this.init_ypos = init_ypos;\r\n\r\n        this.birds = [];\r\n        for(let i = 0; i < instanceCount; i++)\r\n            this.birds.push(new Bird(init_ypos, vert_min, vert_max, hor_min, hor_max));\r\n    }\r\n\r\n    next(cMutate) {\r\n        // debugger;\r\n        this.birds.sort((b1, b2) => b1.score > b2.score ? -1 : (b1.score < b2.score ? 1 : 0));\r\n        this.birds = this.birds.slice(0, 4);\r\n        for(let bird of this.birds) {\r\n            bird.isAlive = true;\r\n            bird.speed = 0;\r\n            bird.yPos = this.init_ypos;\r\n            bird.hor = bird.vert = undefined;\r\n            bird.score = 0;\r\n        }\r\n\r\n        let tmp = [];\r\n        tmp.push(Generation.crossover(this.birds[0], this.birds[1]));\r\n        let r1 = randomInt(0,3);\r\n        let r2 = randomInt(0,3);\r\n        while(r2 === r1) r2 = randomInt(0,3);\r\n        for(let i = 0; i < 3; i++)\r\n            tmp.push(Generation.crossover(this.birds[r1], this.birds[r2]));\r\n        r1 = randomInt(0,3);\r\n        r2 = randomInt(0,3);\r\n        while(r2 === r1) r2 = randomInt(0,3);\r\n        tmp.push(this.birds[r1]);\r\n        tmp.push(this.birds[r2]);\r\n\r\n        tmp.forEach(el => Generation.mutate(el, cMutate));\r\n        tmp.forEach(el => this.birds.push(el));\r\n        // debugger;\r\n    }\r\n\r\n    static mutate(b, cMutate) {\r\n        let min = 1 - cMutate;\r\n        let max = 1 + cMutate;\r\n        b.cVert *= min + Math.random()*(max-min);\r\n        b.cHor *= min + Math.random()*(max-min);\r\n    }\r\n\r\n    static crossover(b1, b2) {\r\n        let rand = randomInt(0, 3);\r\n        let b3 = Object.assign(Object.create(Object.getPrototypeOf(b1)), b1);\r\n        switch(rand) {\r\n            case 0:\r\n                b3.cVert = b1.cVert;\r\n                b3.cHor = b1.cHor;\r\n                break;\r\n            case 1:\r\n                b3.cVert = b1.cVert;\r\n                b3.cHor = b2.cHor;\r\n                break;\r\n            case 2:\r\n                b3.cVert = b2.cVert;\r\n                b3.cHor = b1.cHor;\r\n                break;\r\n            case 3:\r\n                b3.cVert = b2.cVert;\r\n                b3.cHor = b2.cHor;\r\n                break;\r\n        }\r\n        return b3;\r\n    }\r\n}","import Generation from './Generation';\r\n\r\nlet cvs = document.querySelector('#canvas');\r\nlet ctx = cvs.getContext('2d');\r\n\r\nlet bg = new Image();\r\nlet fg = new Image();\r\nlet birdImage = new Image();\r\nlet pipeUp = new Image();\r\nlet pipeBottom = new Image();\r\n\r\nbg.src = './resources/images/flappy_bird_bg.png';\r\nfg.src = './resources/images/flappy_bird_fg.png';\r\nbirdImage.src = './resources/images/flappy_bird_bird.png';\r\npipeUp.src = './resources/images/flappy_bird_pipeUp.png';\r\npipeBottom.src = './resources/images/flappy_bird_pipeBottom.png';\r\n\r\nlet gap = 100;\r\nlet acceleration = 0.6;\r\nlet jumpFrames = 6;\r\nlet jumpFrameSize = 8;\r\nlet border = 120;\r\nlet gameSpeed = 2.5;\r\nlet birdXPosition = 10;\r\nlet decision_threshold = 0.5;\r\n\r\nlet pipes = [];\r\nlet nextPipeInd = -1;\r\nlet genCounter = 1;\r\nlet score = 0;\r\nlet generationBestScore = 0;\r\nlet bestScore = 0;\r\n\r\nlet genr;\r\nlet generationInfo = document.querySelector('#info-generation span');\r\nlet scoreInfo = document.querySelector('#info-score span');\r\nlet bestScoreInfo = document.querySelector('#info-best-score span');\r\n\r\nfunction init() {\r\n    genr = new Generation(10, bg, fg, acceleration, 150);\r\n    start();\r\n}\r\n\r\nfunction start() {\r\n    pipes.push(new Pipe(cvs.width,\r\n        randomInt(-pipeUp.height, cvs.height - fg.height - gap - pipeUp.height)));\r\n    nextPipeInd = 0;\r\n    score = 0;\r\n}\r\n\r\nfunction restart() {\r\n    pipes = [];\r\n    start();\r\n    let cMutate = generationBestScore > bestScore ? 0.05 : 1;\r\n    genr.next(cMutate);\r\n    generationBestScore = 0;\r\n    genCounter++;\r\n    update();\r\n}\r\n\r\nfunction update() {\r\n    ctx.drawImage(bg, 0, 0);\r\n\r\n    let birds = genr.birds.filter(b => b.isAlive);\r\n    if(birds.length === 0) {\r\n        restart();\r\n        return;\r\n    }\r\n\r\n    for(let bird of birds) {\r\n        ctx.drawImage(birdImage, birdXPosition, bird.yPos);\r\n    }\r\n\r\n    for(let i = 0; i < pipes.length; i++) {\r\n        if(pipes[i] === null) continue;\r\n        ctx.drawImage(pipeUp, pipes[i].x, pipes[i].y);\r\n        ctx.drawImage(pipeBottom, pipes[i].x, pipes[i].y + pipeUp.height + gap);\r\n        pipes[i].x -= gameSpeed;\r\n        if(pipes[i].x <= border && !pipes[i].gone) {\r\n            pipes[i].gone = true;\r\n            pipes.push(new Pipe(cvs.width,\r\n                randomInt(-pipeUp.height, cvs.height - fg.height - gap - pipeUp.height)));\r\n        }\r\n\r\n        if(pipes[i].x <= -pipeUp.width) {\r\n            pipes[i] = null;\r\n        }\r\n    }\r\n\r\n    if(birdXPosition >= pipes[nextPipeInd].x + pipeUp.width && !pipes[nextPipeInd].passed) {\r\n        pipes[nextPipeInd].passed = true;\r\n        nextPipeInd++;\r\n        score++;\r\n    }\r\n\r\n    ctx.drawImage(fg, 0, cvs.height - fg.height);\r\n\r\n    for(let bird of birds) {\r\n        bird.yPos += bird.speed;\r\n        bird.speed += acceleration;\r\n        bird.score++;\r\n    }\r\n\r\n    for(let bird of birds) {\r\n        if ((birdXPosition + birdImage.width >= pipes[nextPipeInd].x && birdXPosition <= pipes[nextPipeInd].x + pipeUp.width)\r\n            && (bird.yPos <= pipes[nextPipeInd].y + pipeUp.height || bird.yPos + birdImage.height >= pipes[nextPipeInd].y + pipeUp.height + gap)\r\n            || (bird.yPos >= cvs.height - fg.height - birdImage.height)) {\r\n            bird.isAlive = false;\r\n            bird.score -= pipes[nextPipeInd].x - birdXPosition;\r\n            continue;\r\n        }\r\n        bird.vert = bird.yPos - (pipes[nextPipeInd].y + pipeUp.height + gap/2);\r\n        bird.hor = pipes[nextPipeInd].x - birdXPosition;\r\n        if(bird.chooseToJump() >= decision_threshold) {\r\n            flap(0, bird);\r\n        }\r\n    }\r\n\r\n    generationInfo.innerText = genCounter;\r\n    generationBestScore = Math.max(generationBestScore, score);\r\n    bestScore = Math.max(bestScore, score);\r\n    scoreInfo.innerText = score;\r\n    bestScoreInfo.innerText = bestScore;\r\n\r\n    requestAnimationFrame(update);\r\n}\r\n\r\npipeBottom.onload = () => {\r\n    init();\r\n    update();\r\n};\r\n\r\n\r\nfunction flap(frame, bird) {\r\n    if(frame === jumpFrames) return;\r\n    bird.yPos -= jumpFrameSize;\r\n    bird.speed = 0;\r\n    requestAnimationFrame(() => flap(frame+1, bird));\r\n}\r\n\r\nexport function randomInt(min,max) {\r\n    return Math.floor(Math.random()*(max-min+1)+min);\r\n}\r\n\r\nfunction Pipe(x, y) {\r\n    this.x = x;\r\n    this.y = y;\r\n    this.gone = false;\r\n    this.passed = false;\r\n}"],"sourceRoot":""}