{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/js/Bird.js","webpack:///./src/js/Generation.js","webpack:///./src/js/generation_runner.js"],"names":["Bird","init_ypos","vert_min","vert_max","hor_min","hor_max","cMax","_cVert","Math","random","_cHor","isAlive","yPos","speed","score","vert","undefined","hor","isJumping","scale_vert","x","scale_hor","sigmoid","exp","chooseToJump","cVert","cHor","value","Generation","instanceCount","bg","fg","acceleration","height","width","birds","i","push","cMutate","sort","b1","b2","slice","bird","tmp","crossover","r1","randomInt","r2","forEach","el","mutate","b","min","max","rand","b3","Object","assign","create","getPrototypeOf","cvs","document","querySelector","ctx","getContext","Image","birdImage","pipeUp","pipeBottom","src","gap","jumpFrames","jumpFrameSize","border","gameSpeed","jumpTimeout","birdXPosition","decision_threshold","pipes","nextPipeInd","genCounter","generationBestScore","bestScore","genr","generationInfo","scoreInfo","bestScoreInfo","aliveInfo","init","start","Pipe","restart","next","update","drawImage","filter","length","y","gone","passed","flap","setTimeout","innerText","requestAnimationFrame","onload","frame","floor"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/js/generation_runner.js\");\n","export default class Bird {\r\n\r\n    constructor(init_ypos, vert_min, vert_max, hor_min, hor_max, cMax) {\r\n        this._cVert = Math.random() * cMax;\r\n        this._cHor = Math.random() * cMax;\r\n        this.isAlive = true;\r\n        this.yPos = init_ypos;\r\n        this.speed = 0;\r\n        this.score = 0;\r\n        this.vert = undefined;\r\n        this.hor = undefined;\r\n        this.isJumping = false;\r\n        this.cMax = cMax;\r\n\r\n        this.scale_vert = x => x / (vert_max - vert_min);\r\n        this.scale_hor = x => x / (hor_max - hor_min);\r\n\r\n        let sigmoid = x => 1 / (1 + Math.exp(-x));\r\n        this.chooseToJump = function() {\r\n            return sigmoid(this.cVert*this.scale_vert(this.vert)\r\n                + this.cHor*this.scale_hor(this.hor));\r\n        };\r\n    }\r\n\r\n    get _cVert() {\r\n        return this.cVert;\r\n    }\r\n\r\n    get _cHor() {\r\n        return this.cHor;\r\n    }\r\n\r\n    set _cVert(value) {\r\n        if(value > this.cMax)\r\n            this.cVert = this.cMax;\r\n        else if(value < -this.cMax)\r\n            this.cVert = -this.cMax;\r\n        else\r\n            this.cVert = value;\r\n    }\r\n\r\n    set _cHor(value) {\r\n        if(value > this.cMax)\r\n            this.cHor = this.cMax;\r\n        else if(value < -this.cMax)\r\n            this.cHor = -this.cMax;\r\n        else\r\n            this.cHor = value;\r\n    }\r\n}","import Bird from './Bird';\r\nimport {randomInt} from './generation_runner';\r\n\r\nexport default class Generation {\r\n\r\n    constructor(instanceCount, bg, fg, acceleration, init_ypos, cMax) {\r\n        let vert_min = 0;\r\n        let vert_max = bg.height - fg.height;\r\n        let hor_min = 0;\r\n        let hor_max = bg.width;\r\n        this.init_ypos = init_ypos;\r\n\r\n        this.birds = [];\r\n        for(let i = 0; i < instanceCount; i++)\r\n            this.birds.push(new Bird(init_ypos, vert_min, vert_max, hor_min, hor_max, cMax));\r\n    }\r\n\r\n    next(cMutate) {\r\n        // debugger;\r\n        this.birds.sort((b1, b2) => b1.score > b2.score ? -1 : (b1.score < b2.score ? 1 : 0));\r\n        this.birds = this.birds.slice(0, 4);\r\n        for(let bird of this.birds) {\r\n            bird.isAlive = true;\r\n            bird.speed = 0;\r\n            bird.yPos = this.init_ypos;\r\n            bird.hor = bird.vert = undefined;\r\n            bird.score = 0;\r\n            bird.isJumping = false;\r\n        }\r\n\r\n        let tmp = [];\r\n        tmp.push(Generation.crossover(this.birds[0], this.birds[1]));\r\n        let r1 = randomInt(0,3);\r\n        let r2 = randomInt(0,3);\r\n        while(r2 === r1) r2 = randomInt(0,3);\r\n        for(let i = 0; i < 3; i++)\r\n            tmp.push(Generation.crossover(this.birds[r1], this.birds[r2]));\r\n        r1 = randomInt(0,3);\r\n        r2 = randomInt(0,3);\r\n        while(r2 === r1) r2 = randomInt(0,3);\r\n        tmp.push(this.birds[r1]);\r\n        tmp.push(this.birds[r2]);\r\n\r\n        tmp.forEach(el => Generation.mutate(el, cMutate));\r\n        tmp.forEach(el => this.birds.push(el));\r\n        // debugger;\r\n    }\r\n\r\n    static mutate(b, cMutate) {\r\n        let min = -b.cMax - cMutate;\r\n        let max = b.cMax + cMutate;\r\n        b._cVert *= min + Math.random()*(max-min);\r\n        b._cHor *= min + Math.random()*(max-min);\r\n    }\r\n\r\n    static crossover(b1, b2) {\r\n        let rand = randomInt(0, 3);\r\n        let b3 = Object.assign(Object.create(Object.getPrototypeOf(b1)), b1);\r\n        switch(rand) {\r\n            case 0:\r\n                b3._cVert = b1._cVert;\r\n                b3._cHor = b1._cHor;\r\n                break;\r\n            case 1:\r\n                b3._cVert = b1._cVert;\r\n                b3._cHor = b2._cHor;\r\n                break;\r\n            case 2:\r\n                b3._cVert = b2._cVert;\r\n                b3._cHor = b1._cHor;\r\n                break;\r\n            case 3:\r\n                b3._cVert = b2._cVert;\r\n                b3._cHor = b2._cHor;\r\n                break;\r\n        }\r\n        return b3;\r\n    }\r\n}","import Generation from './Generation';\r\n\r\nlet cvs = document.querySelector('#canvas');\r\nlet ctx = cvs.getContext('2d');\r\n\r\nlet bg = new Image();\r\nlet fg = new Image();\r\nlet birdImage = new Image();\r\nlet pipeUp = new Image();\r\nlet pipeBottom = new Image();\r\n\r\nbg.src = './resources/images/flappy_bird_bg.png';\r\nfg.src = './resources/images/flappy_bird_fg.png';\r\nbirdImage.src = './resources/images/flappy_bird_bird.png';\r\npipeUp.src = './resources/images/flappy_bird_pipeUp.png';\r\npipeBottom.src = './resources/images/flappy_bird_pipeBottom.png';\r\n\r\nlet gap = 100;\r\nlet acceleration = 0.36;\r\nlet jumpFrames = 12;\r\nlet jumpFrameSize = 3;\r\nlet border = 100;\r\nlet gameSpeed = 2.5;\r\nlet jumpTimeout = 50;\r\nlet cMax = 4;\r\nlet birdXPosition = 10;\r\nlet decision_threshold = 0.5;\r\n\r\nlet pipes = [];\r\nlet nextPipeInd = -1;\r\nlet genCounter = 1;\r\nlet score = 0;\r\nlet generationBestScore = 0;\r\nlet bestScore = 0;\r\n\r\nlet genr;\r\nlet generationInfo = document.querySelector('#info-generation span');\r\nlet scoreInfo = document.querySelector('#info-score span');\r\nlet bestScoreInfo = document.querySelector('#info-best-score span');\r\nlet aliveInfo = document.querySelector('#info-alive span');\r\n\r\nfunction init() {\r\n    genr = new Generation(10, bg, fg, acceleration, 150, cMax);\r\n    start();\r\n}\r\n\r\nfunction start() {\r\n    pipes.push(new Pipe(cvs.width,\r\n        randomInt(-pipeUp.height, cvs.height - fg.height - gap - pipeUp.height)));\r\n    nextPipeInd = 0;\r\n    score = 0;\r\n}\r\n\r\nfunction restart() {\r\n    pipes = [];\r\n    start();\r\n    let cMutate = generationBestScore >= bestScore ? 0.05 : 0.3;\r\n    genr.next(cMutate);\r\n    generationBestScore = 0;\r\n    genCounter++;\r\n    update();\r\n}\r\n\r\nfunction update() {\r\n    ctx.drawImage(bg, 0, 0);\r\n\r\n    let birds = genr.birds.filter(b => b.isAlive);\r\n    if(birds.length === 0) {\r\n        restart();\r\n        return;\r\n    }\r\n\r\n    for(let bird of birds) {\r\n        ctx.drawImage(birdImage, birdXPosition, bird.yPos);\r\n    }\r\n\r\n    for(let i = 0; i < pipes.length; i++) {\r\n        if(pipes[i] === null) continue;\r\n        ctx.drawImage(pipeUp, pipes[i].x, pipes[i].y);\r\n        ctx.drawImage(pipeBottom, pipes[i].x, pipes[i].y + pipeUp.height + gap);\r\n        pipes[i].x -= gameSpeed;\r\n        if(pipes[i].x <= border && !pipes[i].gone) {\r\n            pipes[i].gone = true;\r\n            pipes.push(new Pipe(cvs.width,\r\n                randomInt(-pipeUp.height, cvs.height - fg.height - gap - pipeUp.height)));\r\n        }\r\n\r\n        if(pipes[i].x <= -pipeUp.width) {\r\n            pipes[i] = null;\r\n        }\r\n    }\r\n\r\n    if(birdXPosition >= pipes[nextPipeInd].x + pipeUp.width && !pipes[nextPipeInd].passed) {\r\n        pipes[nextPipeInd].passed = true;\r\n        nextPipeInd++;\r\n        score++;\r\n    }\r\n\r\n    ctx.drawImage(fg, 0, cvs.height - fg.height);\r\n\r\n    for(let bird of birds) {\r\n        bird.yPos += bird.speed;\r\n        bird.speed += acceleration;\r\n        bird.score++;\r\n    }\r\n\r\n    for(let bird of birds) {\r\n        if ((birdXPosition + birdImage.width >= pipes[nextPipeInd].x && birdXPosition <= pipes[nextPipeInd].x + pipeUp.width)\r\n            && (bird.yPos <= pipes[nextPipeInd].y + pipeUp.height || bird.yPos + birdImage.height >= pipes[nextPipeInd].y + pipeUp.height + gap)\r\n            || (bird.yPos >= cvs.height - fg.height - birdImage.height)) {\r\n            bird.isAlive = false;\r\n            bird.score -= pipes[nextPipeInd].x - birdXPosition;\r\n            continue;\r\n        }\r\n        bird.vert = bird.yPos - (pipes[nextPipeInd].y + pipeUp.height + gap/2);\r\n        bird.hor = pipes[nextPipeInd].x - birdXPosition;\r\n        if(bird.chooseToJump() >= decision_threshold && !bird.isJumping) {\r\n            flap(0, bird);\r\n            bird.isJumping = true;\r\n            setTimeout(() => bird.isJumping = false, jumpTimeout);\r\n        }\r\n    }\r\n\r\n    generationInfo.innerText = genCounter;\r\n    aliveInfo.innerText = birds.length;\r\n    generationBestScore = Math.max(generationBestScore, score);\r\n    bestScore = Math.max(bestScore, score);\r\n    scoreInfo.innerText = score;\r\n    bestScoreInfo.innerText = bestScore;\r\n\r\n    requestAnimationFrame(update);\r\n}\r\n\r\npipeBottom.onload = () => {\r\n    init();\r\n    update();\r\n};\r\n\r\n\r\nfunction flap(frame, bird) {\r\n    if(frame === jumpFrames) {\r\n        // setTimeout(() => bird.isJumping = false, jumpTimeout);\r\n        return;\r\n    }\r\n    bird.yPos -= jumpFrameSize;\r\n    bird.speed = 0;\r\n    requestAnimationFrame(() => flap(frame+1, bird));\r\n}\r\n\r\nexport function randomInt(min,max) {\r\n    return Math.floor(Math.random()*(max-min+1)+min);\r\n}\r\n\r\nfunction Pipe(x, y) {\r\n    this.x = x;\r\n    this.y = y;\r\n    this.gone = false;\r\n    this.passed = false;\r\n}"],"sourceRoot":""}